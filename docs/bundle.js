(()=>{"use strict";({740:function(n,e){var t=this&&this.__awaiter||function(n,e,t,o){return new(t||(t=Promise))((function(r,i){function a(n){try{u(o.next(n))}catch(n){i(n)}}function s(n){try{u(o.throw(n))}catch(n){i(n)}}function u(n){var e;n.done?r(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,s)}u((o=o.apply(n,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.submit=void 0;const o=(n,e)=>t(void 0,void 0,void 0,(function*(){const t=yield fetch("https://www.ebi.ac.uk/Tools/services/rest/emboss_needle/run",{headers:{accept:"application/json, text/plain, */*","accept-language":"en-GB,en;q=0.5","content-type":"multipart/form-data; boundary=----WebKitFormBoundaryXu7txv8TklTc2eS7","sec-ch-ua":'"Not A(Brand";v="99", "Brave";v="121", "Chromium";v="121"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Linux"',"sec-gpc":"1",Referer:"https://www.ebi.ac.uk/jdispatcher/psa/emboss_needle"},body:`------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="program"\r\n\r\nneedle\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="version"\r\n\r\n6.6.0\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="asequence"\r\n\r\n${n}\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="bsequence"\r\n\r\n${e}\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="stype"\r\n\r\ndna\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="format"\r\n\r\npair\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="matrix"\r\n\r\nEDNAFULL\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="gapopen"\r\n\r\n10\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="gapext"\r\n\r\n0.5\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="endweight"\r\n\r\nfalse\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="endopen"\r\n\r\n10\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="endextend"\r\n\r\n0.5\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="toolId"\r\n\r\nemboss_needle\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="email"\r\n\r\nwp-angular-web@ebi.ac.uk\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7\r\nContent-Disposition: form-data; name="title"\r\n\r\nEMBOSS Needle's job\r\n------WebKitFormBoundaryXu7txv8TklTc2eS7--\r\n`,method:"POST"});if(200!==t.status)throw new Error(`got status ${t.status} from run endpoint: ${yield t.text()}`);return yield t.text()})),r=n=>t(void 0,void 0,void 0,(function*(){const e=`https://www.ebi.ac.uk/Tools/services/rest/emboss_needle/result/${n}/out`,t={headers:{accept:"application/json, text/plain, */*","accept-language":"en-GB,en;q=0.5","sec-ch-ua":'"Not A(Brand";v="99", "Brave";v="121", "Chromium";v="121"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Linux"',"sec-gpc":"1",Referer:"https://www.ebi.ac.uk/jdispatcher/psa/emboss_needle/summary?jobId=emboss_needle-I20240202-104914-0356-44799083-p1m"},body:null,method:"GET"};let o={status:-1};for(;200!==o.status;){yield new Promise((n=>setTimeout(n,3e3)));try{o=yield fetch(e,t)}catch(n){}}return yield o.text()})),i=n=>{const e=[],t=n.split("\n").map((n=>n.trim())).filter((n=>n.length>0));let o=!1;for(const n of t)o?(e[e.length-1]+="\n",e[e.length-1]+=n,o=!1):(e.push(n),o=">"===n[0]);return e};e.submit=(n,e,a)=>t(void 0,void 0,void 0,(function*(){const t=n.trim(),s=i(e);console.log("bs:\n",s.map(((n,e)=>e+": "+n)).join("\n"));const u=s.map(((n,e)=>((n,e,t)=>({a:n,b:e,idPromise:o(n,e),index:t}))(t,n,e)));for(const n of u){let e="unknown error";try{const t=yield n.idPromise;try{e=yield r(t)}catch(n){e="failed to get result for "+t+":"+String(n)}}catch(n){e="failed to submit job: "+String(n)}a(n.a,n.b,e,n.index,u.length)}}));const a=n=>{const e=document.getElementById(n);if(null==e)throw new Error(`element with id ${n} not found`);return e};document.addEventListener("DOMContentLoaded",(function(){a("form").addEventListener("submit",(function(n){n.preventDefault(),function(){const n={a:a("a").value,b:a("b").value};a("output").innerText="",a("status").innerText=`Processing... 1 / ${i(n.b).length} - 0%`,(0,e.submit)(n.a,n.b,((n,e,t,o,r)=>{console.log("callback",n,e,t,o,r),a("output").innerHTML+=`<div><pre>${t}</pre></div>`,a("status").innerText=o===r-1?`Processed ${r} / ${r} - 100% - Done!`:`Processing... ${o+1} / ${r} - ${(o+1)/r*100}%`}))}()}))}))}})[740](0,{})})();